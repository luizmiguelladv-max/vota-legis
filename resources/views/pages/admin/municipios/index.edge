<!DOCTYPE html>
<html lang="pt-BR">
<head>
  @include('partials/head')
</head>
<body>
  <div class="d-flex">
    @include('partials/sidebar')

    <div class="main-content flex-grow-1">
      @include('partials/navbar')

      <main class="p-4">
        <div class="d-flex justify-content-between align-items-center mb-4">
          <h4 class="section-title mb-0">
            <i class="bi bi-buildings me-2"></i>Camaras Municipais
          </h4>
          <a href="/admin/municipios/criar" class="btn btn-primary">
            <i class="bi bi-plus-lg me-1"></i>Nova Camara
          </a>
        </div>

        <div class="card">
          <div class="card-body">
            <div class="table-responsive">
              <table class="table table-hover" id="tabelaMunicipios">
                <thead>
                  <tr>
                    <th>Nome</th>
                    <th>UF</th>
                    <th>Status</th>
                    <th>Banco</th>
                    <th width="120">Acoes</th>
                  </tr>
                </thead>
                <tbody>
                  @each(municipio in municipios)
                    <tr>
                      <td>{{ municipio.nome }}</td>
                      <td>{{ municipio.uf }}</td>
                      <td>
                        @if(municipio.ativo)
                          <span class="badge bg-success">Ativo</span>
                        @else
                          <span class="badge bg-danger">Inativo</span>
                        @end
                      </td>
                      <td>
                        @if(municipio.bancoCriado)
                          <span class="badge bg-success"><i class="bi bi-check"></i> Criado</span>
                        @else
                          <span class="badge bg-warning">Pendente</span>
                        @end
                      </td>
                      <td>
                        <div class="btn-group btn-group-sm">
                          <a href="/admin/municipios/{{ municipio.id }}" class="btn btn-outline-primary" title="Ver">
                            <i class="bi bi-eye"></i>
                          </a>
                          <a href="/admin/municipios/{{ municipio.id }}/editar" class="btn btn-outline-secondary" title="Editar">
                            <i class="bi bi-pencil"></i>
                          </a>
                        </div>
                      </td>
                    </tr>
                  @else
                    <tr>
                      <td colspan="5" class="text-center text-muted py-4">
                        Nenhuma camara cadastrada
                      </td>
                    </tr>
                  @end
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </main>
    </div>
  </div>

  @include('partials/scripts')
  <script>
    $(document).ready(function() {
      $('#tabelaMunicipios').DataTable({
        language: { url: '//cdn.datatables.net/plug-ins/1.13.6/i18n/pt-BR.json' },
        order: [[0, 'asc']]
      });
    });
  </script>
</body>
</html>
